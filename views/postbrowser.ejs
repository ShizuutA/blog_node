<!DOCTYPE html>
<html>
  <head>
    <title>The Rabbit Hole</title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <link rel="stylesheet" href="/stylesheets/home.css" />
    <link rel="stylesheet" href="/stylesheets/user-panel.css" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fleur+De+Leah&display=swap" rel="stylesheet">
  </head>
  <body>
    <header>
      <div>
        <h1>The Rabbit Hole</h1>
      </div> 
      <% if (user) { %>
      <div id="user-info">
        <button id="user-nav-btn"><img src="<%= pfpdata %>" alt="<%= user  %>" class="pfp" ></button> <br>
        <nav id="user-nav" >
          <ul>
            <li id="user-pfp"><img src='<%= pfpdata %>' alt="<%= user %>" class="pfp" /></li>
            <li>
              <form action="/logout" method="POST">
                <button type="submit">Logout</button>
              </form>
            </li>
            <li><a href="/users/<%= user %>">Profile</a></li>
            <% if (admin) { %>
              <li><a href="/CreatePost">Create Post</a></li>
            <% } %>
        </nav>
      </div>
      <% } %>
      <div id="navbar">
        <nav>
        <ul>
          <li><a href="/">Home</a></li>
          <% if (!user) { %>
          <li><a href="/login">Login</a></li>
          <li><a href="/register">Register</a></li>
          <% } %>
        </ul>
      </nav>
      </div>
     
      <hr>
    </header>
    <main>
      <div></div>
      <div id="blog-container">
        <h2>Posts</h2>
        <ul>
          <% posts.forEach(post => { %>
            <li class="blog-post" id="post-<%= post['ID'] %>">
              <h3><%= post['title'] %></h3>
              <p><%= post['preview'] %></p>
              <a href="/posts/<%= post['ID'] %>">Read more</a>
            </li>
          <% }) %>
        </ul>
      </div>
    </main>
    <footer>
    </footer>
    <script rel="js" src="/javascripts/user-side-pannel.js"></script>
  </body>
</html>
